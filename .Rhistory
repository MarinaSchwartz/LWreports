load("~/Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/WIN Standards Activity and Results 12-23 Template.xlsx")
### Read in the relevant data sheets
TP <- read_xlsx("/Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 1)
TP <- read_csv("/Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 1)
### Read in the relevant data sheets
TP <- read_xlsx("/Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 1)
library(tidyverse)
library(readxl)
library(lubridate)
library(hms)
TP <- read_xlsx("/Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 1)
### Read in the relevant data sheets
TP <- read_xlsx("Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 1)
### Read in the relevant data sheets
TP <- read_xlsx("Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 1)
TN <- read_xlsx("Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 2)
CHL_corrected <- read_xlsx("Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 3)
CHL_uncorrected <- read_xlsx("Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 4)
Secchi <- read_xlsx("Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/Project Coast Stacked Working 1-2-24.xlsx", sheet = 5)
### Read in the WIN template
WIN_Temp <- read_xlsx("Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/WIN Standards Activity and Results 12-23 Template.xlsx", col_types = c(rep("text",31)))
### Read in the WIN template
WIN_Temp <- read_xlsx("Desktop/CODING/WIN File Creation/Project Coast Upload 1-2-24/WIN Standards Activity and Results 12-23 Template.xlsx", col_types = c(rep("text",34)))
Secchi <- Secchi %>%
mutate(activity_start_date = make_date(month = MM, day = DD, year = YYYY)) %>%
mutate(activity_start_date = format(activity_start_date, format = "%D")) %>%
mutate(activity_start_time = format(activity_start_time, format = "%R")) %>%
mutate(activity_start_date_time = paste0(activity_start_date," ",activity_start_time)) %>%
select(-activity_start_time, -MM, -DD, -YYYY) %>%
mutate(activity_ID = paste0(site,"-",sta,"-",activity_start_date,"F")) %>%
mutate(monit_loc_ID = paste0(site,"-",sta)) %>%
select(-activity_start_date, -sys, -sta) %>%
## Marina Edits End Here
mutate(total_depth = as.character(total_depth)) %>%
mutate(org_result_value = as.character(org_result_value)) %>%
TP <- TP %>%
mutate(activity_start_date = make_date(month = MM, day = DD, year = YYYY)) %>%
mutate(activity_start_date = format(activity_start_date, format = "%D")) %>%
mutate(activity_start_time = format(activity_start_time, format = "%R")) %>%
mutate(activity_start_date_time = paste0(activity_start_date," ",activity_start_time)) %>%
select(-activity_start_time, -MM, -DD, -YYYY) %>%
mutate(activity_ID = paste0(site,"-",sta,"-",activity_start_date,"S")) %>%
mutate(monit_loc_ID = paste0(site,"-",sta)) %>%
select(-activity_start_date, -sys, -sta) %>%
mutate(org_result_value = as.character(org_result_value)) %>%
mutate(analysis_start_time = format(analysis_time, format = "%R")) %>%
mutate(analysis_start_date_time = paste0(analysis_start_date," ",analysis_start_time)) %>%
mutate(preperation_start_time = format(preperation_time, format = "%R")) %>%
mutate(preperation_start_date_time = paste0(preperation_start_date," ",preperation_start_time)) %>%
select(-sys, -sta, -activity_start_date, -MM, -DD, -YYYY, -analysis_time, -analysis_date, -analysis_start_time, -analysis_start_date, -county)
Secchi <- Secchi %>%
mutate(activity_start_date = make_date(month = MM, day = DD, year = YYYY)) %>%
mutate(activity_start_date = format(activity_start_date, format = "%D")) %>%
mutate(activity_start_time = format(activity_start_time, format = "%R")) %>%
mutate(activity_start_date_time = paste0(activity_start_date," ",activity_start_time)) %>%
select(-activity_start_time, -MM, -DD, -YYYY) %>%
mutate(activity_ID = paste0(site,"-",sta,"-",activity_start_date,"F")) %>%
mutate(monit_loc_ID = paste0(site,"-",sta)) %>%
select(-activity_start_date, -sys, -sta) %>%
mutate(total_depth = as.character(total_depth)) %>%
mutate(org_result_value = as.character(org_result_value)) %>%
rlang::last_trace()
Secchi <- Secchi %>%
mutate(activity_start_date = make_date(month = MM, day = DD, year = YYYY)) %>%
mutate(activity_start_date = format(activity_start_date, format = "%D")) %>%
mutate(activity_start_time = format(activity_start_time, format = "%R")) %>%
mutate(activity_start_date_time = paste0(activity_start_date," ",activity_start_time)) %>%
select(-activity_start_time, -MM, -DD, -YYYY) %>%
mutate(activity_ID = paste0(site,"-",sta,"-",activity_start_date,"F")) %>%
mutate(monit_loc_ID = paste0(site,"-",sta)) %>%
select(-activity_start_date, -sys, -sta) %>%
mutate(total_depth = as.character(total_depth)) %>%
mutate(org_result_value = as.character(org_result_value)) %>%
TP <- TP %>%
mutate(activity_start_date = make_date(month = MM, day = DD, year = YYYY)) %>%
mutate(activity_start_date = format(activity_start_date, format = "%D")) %>%
mutate(activity_start_time = format(activity_start_time, format = "%R")) %>%
mutate(activity_start_date_time = paste0(activity_start_date," ",activity_start_time)) %>%
select(-activity_start_time, -MM, -DD, -YYYY) %>%
mutate(activity_ID = paste0(site,"-",sta,"-",activity_start_date,"S")) %>%
mutate(monit_loc_ID = paste0(site,"-",sta)) %>%
select(-activity_start_date, -sys, -sta) %>%
mutate(org_result_value = as.character(org_result_value)) %>%
mutate(analysis_start_time = format(analysis_time, format = "%R")) %>%
mutate(analysis_start_date_time = paste0(analysis_start_date," ",analysis_start_time)) %>%
mutate(preperation_start_time = format(preperation_time, format = "%R")) %>%
mutate(preperation_start_date_time = paste0(preperation_start_date," ",preperation_start_time)) %>%
select(-sys, -sta, -activity_start_date, -MM, -DD, -YYYY, -analysis_time, -analysis_date, -analysis_start_time, -analysis_start_date, -county)
Secchi <- Secchi %>%
mutate(activity_start_date = make_date(month = MM, day = DD, year = YYYY)) %>%
mutate(activity_start_date = format(activity_start_date, format = "%D")) %>%
TP <- TP %>%
mutate(activity_start_date = make_date(month = MM, day = DD, year = YYYY)) %>%
mutate(activity_start_date = format(activity_start_date, format = "%D")) %>%
mutate(activity_start_time = format(activity_start_time, format = "%R")) %>%
mutate(activity_start_date_time = paste0(activity_start_date," ",activity_start_time)) %>%
select(-activity_start_time, -MM, -DD, -YYYY) %>%
mutate(activity_ID = paste0(site,"-",sta,"-",activity_start_date,"S")) %>%
mutate(monit_loc_ID = paste0(site,"-",sta)) %>%
select(-activity_start_date, -sys, -sta) %>%
mutate(org_result_value = as.character(org_result_value)) %>%
mutate(analysis_start_time = format(analysis_time, format = "%R")) %>%
mutate(analysis_start_date_time = paste0(analysis_start_date," ",analysis_start_time)) %>%
mutate(preperation_start_time = format(preperation_time, format = "%R")) %>%
mutate(preperation_start_date_time = paste0(preperation_start_date," ",preperation_start_time)) %>%
select(-sys, -sta, -activity_start_date, -MM, -DD, -YYYY, -analysis_time, -analysis_date, -analysis_start_time, -analysis_start_date, -county)
select(-sys, -sta, -activity_start_date, -MM, -DD, -YYYY, -analysis_time, -analysis_date, -analysis_start_time, -analysis_start_date, -county)
domgl <- domgl_temp %>%
mutate(`Org Result Value` = ysi$DO_mgl) %>%
mutate(`Monitoring Location ID` = ysi$monit_loc_ID) %>%
mutate(`Total Depth` = ysi$total_depth) %>%
mutate(`Value Qaulifier*` = ysi$qualifier) %>%
mutate(`Activity Start Date Time` = ysi$activity_start_date_time) %>%
mutate(`Activity ID` = ysi$activity_ID)
TN <- TN %>%
mutate(activity_start_date = make_date(month = MM, day = DD, year = YYYY)) %>%
mutate(activity_start_date = format(activity_start_date, format = "%D")) %>%
mutate(activity_start_time = format(activity_start_time, format = "%R")) %>%
mutate(activity_start_date_time = paste0(activity_start_date," ",activity_start_time)) %>%
select(-activity_start_time, -MM, -DD, -YYYY) %>%
mutate(activity_ID = paste0(site,"-",sta,"-",activity_start_date,"S")) %>%
mutate(monit_loc_ID = paste0(site,"-",sta)) %>%
select(-activity_start_date, -sys, -sta) %>%
mutate(org_result_value = as.character(org_result_value)) %>%
mutate(analysis_start_time = format(analysis_time, format = "%R")) %>%
mutate(analysis_start_date_time = paste0(analysis_start_date," ",analysis_start_time)) %>%
mutate(preperation_start_time = format(preperation_time, format = "%R")) %>%
mutate(preperation_start_date_time = paste0(preperation_start_date," ",preperation_start_time)) %>%
select(-sys, -sta, -activity_start_date, -MM, -DD, -YYYY, -analysis_time, -analysis_date, -analysis_start_time, -analysis_start_date, -county)
write.table(Secchi_WIN, file = "exports/DO_mgL_Jan2023.txt", sep = "|", na = "", row.names = FALSE, quote = FALSE)
Secchi_WIN <- WIN_Temp %>% ## Marina Edits End Here
mutate(`Org Result Value` = ysi$DO_mgl) %>%
mutate(`Monitoring Location ID` = ysi$monit_loc_ID) %>%
mutate(`Total Depth` = ysi$total_depth) %>%
mutate(`Value Qaulifier*` = ysi$qualifier) %>%
mutate(`Activity Start Date Time` = ysi$activity_start_date_time) %>%
mutate(`Activity ID` = ysi$activity_ID)
Secchi_WIN <- WIN_Temp %>% ## Marina Edits End Here
mutate(`Org Result Value` = Secchi$`Org Result Value`) %>%
mutate(`Monitoring Location ID` = Secchi$monit_loc_ID) %>%
mutate(`Total Depth` = Secchi$total_depth) %>%
mutate(`Value Qaulifier*` = Secchi$qualifier) %>%
mutate(`Activity Start Date Time` = Secchi$activity_start_date_time) %>%
mutate(`Activity ID` = Secchi$activity_ID)
Secchi_WIN <- WIN_Temp %>% ## Marina Edits End Here
mutate(`Org Result Value` = Secchi$Org_Result_Value) %>%
mutate(`Monitoring Location ID` = Secchi$monit_loc_ID) %>%
mutate(`Total Depth` = Secchi$total_depth) %>%
mutate(`Value Qaulifier*` = Secchi$value_qualifier) %>%
mutate(`Activity Start Date Time` = Secchi$activity_start_date_time) %>%
mutate(`Activity ID` = Secchi$activity_ID)
mutate(`Org Result Value` = Secchi$Org_Result_Value) %>%
Secchi_WIN <- WIN_Temp %>%
mutate(`Org Result Value` = Secchi$Org_Result_Value) %>%
Secchi_WIN <- WIN_Temp %>%
mutate(`Org Result Value` = Secchi$Org_Result_Value) %>%
mutate(`Monitoring Location ID` = Secchi$monit_loc_ID) %>%
mutate(`Total Depth` = Secchi$total_depth) %>%
mutate(`Value Qaulifier*` = Secchi$value_qualifier) %>%
mutate(`Activity Start Date Time` = Secchi$activity_start_date_time) %>%
mutate(`Activity ID` = Secchi$activity_ID)
Secchi_WIN <- WIN_Temp %>%
mutate(`Org Result Value` = Secchi$Org_Result_Value) %>%
mutate(`Monitoring Location ID` = Secchi$monit_loc_ID) %>%
mutate(`Total Depth` = Secchi$total_depth) %>%
mutate(`Value Qaulifier*` = Secchi$value_qualifier) %>%
mutate(`Activity Start Date Time` = Secchi$activity_start_date_time) %>%
mutate(`Activity ID` = Secchi$activity_ID)
write.table(Secchi_WIN, file = "exports/DO_mgL_Jan2023.txt", sep = "|", na = "", row.names = FALSE, quote = FALSE)
source("~/Documents/GitHub/LWreports/LW_For_Loop.R")
library(tidyverse)
library(gt)
library(SciViews)
library(broom)
library(glue)
library(ggtext)
library(readxl)
library(glue)
install.packages("glue")
install.packages("glue")
library(tidyverse)
library(gt)
library(SciViews)
library(broom)
library(glue)
library(ggtext)
library(readxl)
### Loading and Preparing Data
data_1 = read_xlsx("Lakewatch Base File 10-24-2023.xlsx")
### Loading and Preparing Data
data_1 = read_xlsx("Lakewatch Base File 10-24-2023.xlsx")
### Import Libraries ###
###IMPORTING LIBRARIES AND LOADING DATA###
##########################################################################################
#Commenting out this code to add to the for loop file
#importing libraries
library(tidyverse)
### Loading and Preparing Data
data_1 = read_xlsx("Lakewatch Base File 10-24-2023.xlsx")
knitr::include_graphics("Figure 1 RiverStream.png")
setwd("/Users/mevanskeene/Documents/GitHub/LWreports")
setwd("/Users/mevanskeene/Desktop/GitHub/LWreports")
setwd("/Users/mevanskeene/Documents/GitHub/LWreports")
knitr::include_graphics("Figure 1 RiverStream.png")
### Import Libraries ###
###IMPORTING LIBRARIES AND LOADING DATA###
##########################################################################################
#Commenting out this code to add to the for loop file
#importing libraries
library(tidyverse)
library(gt)
library(SciViews)
library(broom)
#broom is just to get values form lm function in easier to reference from
library(glue)
library(ggtext)
#glue and ggtext are for making labels. trying to make labels and get default ggplot functions to correctly parse those labels is a nightmare. ggtext helps by allowing you to use html tags in the labels. glue helps by allowing you to use variables in the labels.
library(readxl)
library(tinytex)
#tinytex::install_tinytex()
#tinytex::tlmgr_update()
?count
### Loading and Preparing Data
data_1 = read_xlsx("Lakewatch Base File 10-24-2023.xlsx")
data_1 <- data_1 %>%
mutate(Lake_County = paste(Lake, County)) %>%
filter(Study == "LW") %>%
filter(`water type` == "Lake" | `water type` == "RiverStream" | `water type` == "Estuary")
head(data_1)
data_2 = read.csv("All_Data.csv")
data_2 = data_2 %>%
mutate(Station = as.character(Station)) %>%
mutate(Lake_County = paste(Lake, County))
head(data_2)
View(data_1)
data_2 = read.csv("All_Data.csv")
data_2 = data_2 %>%
mutate(Station = as.character(Station)) %>%
mutate(Lake_County = paste(Lake, County))
head(data_2)
### Loading and Preparing Data
data_1 = read_xlsx("Lakewatch Base File 10-24-2023.xlsx")
data_1 <- data_1 %>%
mutate(Lake_County = paste(Lake, County)) %>%
filter(Study == "LW") %>%
filter(`water type` == "Lake" | `water type` == "RiverStream" | `water type` == "Estuary")
head(data_1)
data_2 = read.csv("All_Data.csv")
data_2 = data_2 %>%
mutate(Station = as.character(Station)) %>%
mutate(Lake_County = paste(Lake, County))
head(data_2)
alice = data_1 %>% filter(Lake_County == ""Alice Alachua"")
View(data_1)
alice = data_1 %>% filter(Lake_County == Alice Alachua)
alice = data_1 %>% filter(Lake_County == "Alice Alachua")
View(alice)
View(data_2)
alice = data_2 %>% filter(Lake_County == "Alice Alachua")
View(alice)
byyr <- alice %>%
group_by(Year) %>%
summarize(gmean(TP), gmean(TN), gmean(CHL), gmean(SECCHI_ft))
gmean <- function(x){
xc <- x[!is.na(x)]
xg <- exp(mean(log(xc[xc>0])))
xg <- round(xg)
return(xg)
}
byyr <- alice %>%
+     group_by(Year) %>%
+     summarize(gmean(TP), gmean(TN), gmean(CHL), gmean(SECCHI_ft))
View(data_2)
View(data_2)
View(data_1)
alice_1 = data_1 %>% filter(Lake_County == "Alice Alachua")
View(alice_1)
alice_2 = data_2 %>% filter(Lake_County == "Alice Alachua")
View(alice_2)
byyr <- alice_2 %>%
group_by(Year) %>%
summarize(gmean(TP), gmean(TN), gmean(CHL), gmean(SECCHI_ft))
View(byyr)
byyr <- Lake_2 %>%
summarize(gmean(TP), gmean(TN), gmean(CHL), gmean(SECCHI_ft))
byyr <- alice_2 %>%
summarize(gmean(TP), gmean(TN), gmean(CHL), gmean(SECCHI_ft))
View(byyr)
data_n = alice_2 %>% group_by(Lake_County) %>% summarise(
"Total Phosphorus (µg/L)" = count(TP, na.rm = TRUE),
"Total Nitrogen (µg/L)" = count(TN, na.rm = TRUE),
"Chlorophyll- uncorrected (µg/L)" = count(CHL, na.rm = TRUE),
"Secchi (ft)" = count(SECCHI_ft, na.rm = TRUE),
"Secchi (m)" = count(SECCHI_ft, na.rm = TRUE),
"Color (Pt-Co Units)" = count(Color, na.rm = TRUE),
"Specific Conductance (µS/cm@25 C)" = count(Cond_uS, na.rm = TRUE),
"Lake Classification" = ""
) %>% pivot_longer(cols = 2:9, names_to = "parameter",values_to = "n",values_transform = list(n = as.character)) %>% select(-Lake_County)
View(alice_2)
data_n = alice_2 %>% group_by(Lake_County) %>% summarise(
"Total Phosphorus (µg/L)" = n(TP, na.rm = TRUE),
"Total Nitrogen (µg/L)" = count(TN, na.rm = TRUE),
"Chlorophyll- uncorrected (µg/L)" = count(CHL, na.rm = TRUE),
"Secchi (ft)" = count(SECCHI_ft, na.rm = TRUE),
"Secchi (m)" = count(SECCHI_ft, na.rm = TRUE),
"Color (Pt-Co Units)" = count(Color, na.rm = TRUE),
"Specific Conductance (µS/cm@25 C)" = count(Cond_uS, na.rm = TRUE),
"Lake Classification" = ""
) %>% pivot_longer(cols = 2:9, names_to = "parameter",values_to = "n",values_transform = list(n = as.character)) %>% select(-Lake_County)
data_n = alice_2 %>% group_by(Lake_County) %>% summarise(
"Total Phosphorus (µg/L)" = n(TP),
"Total Nitrogen (µg/L)" = count(TN, na.rm = TRUE),
"Chlorophyll- uncorrected (µg/L)" = count(CHL, na.rm = TRUE),
"Secchi (ft)" = count(SECCHI_ft, na.rm = TRUE),
"Secchi (m)" = count(SECCHI_ft, na.rm = TRUE),
"Color (Pt-Co Units)" = count(Color, na.rm = TRUE),
"Specific Conductance (µS/cm@25 C)" = count(Cond_uS, na.rm = TRUE),
"Lake Classification" = ""
) %>% pivot_longer(cols = 2:9, names_to = "parameter",values_to = "n",values_transform = list(n = as.character)) %>% select(-Lake_County)
?n()
data_n = Lake_2 %>% group_by(Lake_County) %>% summarise(
"Total Phosphorus (µg/L)" = count(TP),
"Total Nitrogen (µg/L)" = count(TN, na.rm = TRUE),
"Chlorophyll- uncorrected (µg/L)" = count(CHL, na.rm = TRUE),
"Secchi (ft)" = count(SECCHI_ft, na.rm = TRUE),
"Secchi (m)" = count(SECCHI_ft, na.rm = TRUE),
"Color (Pt-Co Units)" = count(Color, na.rm = TRUE),
"Specific Conductance (µS/cm@25 C)" = count(Cond_uS, na.rm = TRUE),
"Lake Classification" = ""
) %>% pivot_longer(cols = 2:9, names_to = "parameter",values_to = "n",values_transform = list(n = as.character)) %>% select(-Lake_County)
data_n = alice_2 %>% group_by(Lake_County) %>% summarise(
"Total Phosphorus (µg/L)" = count(TP, na.rm = TRUE),
"Total Nitrogen (µg/L)" = count(TN, na.rm = TRUE),
"Chlorophyll- uncorrected (µg/L)" = count(CHL, na.rm = TRUE),
"Secchi (ft)" = count(SECCHI_ft, na.rm = TRUE),
"Secchi (m)" = count(SECCHI_ft, na.rm = TRUE),
"Color (Pt-Co Units)" = count(Color, na.rm = TRUE),
"Specific Conductance (µS/cm@25 C)" = count(Cond_uS, na.rm = TRUE),
"Lake Classification" = ""
) %>% pivot_longer(cols = 2:9, names_to = "parameter",values_to = "n",values_transform = list(n = as.character)) %>% select(-Lake_County)
